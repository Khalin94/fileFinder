<%@ page import="java.util.*"%><%@ page import="nads.lib.message.MessageBean"%><%@ page import="nads.lib.util.*"%><%@ page import="kr.co.kcc.bf.bfutil.*" %><%@ page import="kr.co.kcc.pf.exception.AppException"%><jsp:useBean id="objMsgBean" class="nads.lib.message.MessageBean" scope="request"/><%	String strMessage = "";	String strError = "no";	String strOrgPosiOrganId   = "";	String strDeptNm   = "";	String strEmail   = "";	String strOfficeTel   = "";	String strFaxNo   = "";	String strCphone   = "";	String strPostCd   = "";	String strJuso1   = "";	String strJuso2   = "";	String strCgDuty   = "";	String strRepFlag   = "";	String strPhotoPath   = "";	String strRemark   = "";		String strOfficeTel1 = "";	String strOfficeTel2 = "";	String strOfficeTel3 = "";		String strFaxNo1 = "";	String strFaxNo2 = "";	String strFaxNo3 = "";		String strCphone1 = "";	String strCphone2 = "";	String strCphone3 = "";		String strRepFlagY   = "";	String strRepFlagN   = "";		String strPostCd1   = "";	String strPostCd2   = "";		String strCphone1_010 = "";	String strCphone1_011 = "";	String strCphone1_016 = "";	String strCphone1_017 = "";	String strCphone1_018 = "";	String strCphone1_019 = "";	String strUserId   = ""; 	String strUserNm = "";	String strOrganNm = "";	String strOrganId = "";		String strJuminNo = "";	String strJuminNo1 = "";	String strJuminNo2 = "";		String strRegTs = "";	String strGender = "";	String strInitDate = "";		String strInoutGbn = "";	String strGovGbn = "";		String strSessInOutGbn = "";	String strHighOrganNm = "";		String strUserKind = "";	String strOffisignFlag = "";	String strSystemGbn = "";	String strInnerPhone = "";	String strgrdNm = "";	String strposiNm = "";		ArrayList objChargeInfoArry = new ArrayList();	ArrayList objUserChargeArry = new ArrayList();	try	{		String strTmpId = nads.lib.reqsubmit.util.StringUtil.getNoTagStr(StringUtil.getNVL(request.getParameter("succid"), ""));		String strGubn = nads.lib.reqsubmit.util.StringUtil.getNoTagStr(StringUtil.getNVL(request.getParameter("gubn"), "1"));		//'1'->사용자 조회 , '3'-> 개인정보변경화면에서 후임자 등록버튼클릭시		//                                    사용자의 기관과 대표여부를 조회한다(기관정보는 사용자와 후임자가 같음)		if(strGubn.equals("1") || strGubn.equals("3")){			strUserId = (String)session.getAttribute("USER_ID"); //사용자 조회		}else{     //후임자 등록후 후임자 조회			strUserId = strTmpId;    //후임자 조회-후임자등록 버튼을 클릭시		}		String strFileUrl = AdminIo.getUrl();		nads.dsdm.app.activity.userinfo.UserInfoDelegate objUserInfoDelegate = new nads.dsdm.app.activity.userinfo.UserInfoDelegate();				Hashtable objUserInfoHt = objUserInfoDelegate.selectUserInfo(strUserId);		if((objUserInfoHt != null) && (objUserInfoHt.size() > 0)){			if(strGubn.equals("3")){  //개인정보변경화면에서 [후임자 등록 버튼] 클릭 시 기관명과 대표여부를 후임자 등록 화면에 표시				strOrganNm = (String)objUserInfoHt.get("ORGAN_NM");				strRepFlag   = (String)objUserInfoHt.get("REP_FLAG");				strUserKind = (String)objUserInfoHt.get("USER_KIND");				strOffisignFlag = (String)objUserInfoHt.get("OFFISIGN_FLAG");				if(strRepFlag.equals("Y")){					strRepFlagY = "checked";				}else{					strRepFlagN = "checked";				}			}else{				strOrgPosiOrganId = (String)objUserInfoHt.get("ORGAN_ID");				strDeptNm   = (String)objUserInfoHt.get("DEPT_NM");				strEmail   = (String)objUserInfoHt.get("EMAIL");				strOfficeTel   = (String)objUserInfoHt.get("OFFICE_TEL");				strFaxNo   = (String)objUserInfoHt.get("FAX_NO");				strCphone   = (String)objUserInfoHt.get("CPHONE");				strPostCd   = (String)objUserInfoHt.get("POST_CD");				strJuso1   = (String)objUserInfoHt.get("JUSO1");				strJuso2   = (String)objUserInfoHt.get("JUSO2");				//strCgDuty   = (String)objUserInfoHt.get("CG_DUTY");  //담당업무는 text에서 checkbox로 수정(05.14)				strRepFlag   = (String)objUserInfoHt.get("REP_FLAG");				strPhotoPath   = (String)objUserInfoHt.get("PHOTO_PATH");				strRemark   = (String)objUserInfoHt.get("REMARK");				strUserNm = (String)objUserInfoHt.get("USER_NM");				strOrganNm = (String)objUserInfoHt.get("ORGAN_NM");				strOrganId = (String)objUserInfoHt.get("ORGAN_ID");				strJuminNo = (String)objUserInfoHt.get("JUMIN_NO");				strRegTs = (String)objUserInfoHt.get("REG_TS");				strInoutGbn = (String)objUserInfoHt.get("INOUT_GBN");				strGovGbn = (String)objUserInfoHt.get("GOV_GBN");				strSystemGbn = (String)objUserInfoHt.get("SYSTEM_USE_GBN");				strInnerPhone = (String)objUserInfoHt.get("INNERPHONE");				strgrdNm = (String)objUserInfoHt.get("GRD_NM")==null?"":(String)objUserInfoHt.get("GRD_NM");				strposiNm = (String)objUserInfoHt.get("POSI_NM")==null?"":(String)objUserInfoHt.get("POSI_NM");				strInitDate = strRegTs.substring(0,4) + "년" + strRegTs.substring(4,6) + "월" + strRegTs.substring(6,8) + "일" ;				if(strPhotoPath.length()  > 0) 					strPhotoPath =  strPhotoPath;		        //주민등록번호에서 개인식별정보 및 생년월일로 변경되어서 성별 구분안됨 ksw				/*if(strJuminNo.length() >= 13){					if((strJuminNo.substring(6,7).equals("1")) || (strJuminNo.substring(6,7).equals("3")))						strGender = "남";								if((strJuminNo.substring(6,7).equals("2")) || (strJuminNo.substring(6,7).equals("4")))						strGender = "여";										strJuminNo = "******" + " - " + "***" +strJuminNo.substring(9,13);				}*/						Vector objOfficeTel = nads.lib.util.ActComm.makeNoType(strOfficeTel, "-");				Vector objFaxNo = nads.lib.util.ActComm.makeNoType(strFaxNo, "-");				Vector objCphone = nads.lib.util.ActComm.makeNoType(strCphone, "-");						for(int i=0; i<objOfficeTel.size(); i++){					switch (i){						case 0:							strOfficeTel1 = (String)objOfficeTel.elementAt(i);							break;						case 1:							strOfficeTel2 = (String)objOfficeTel.elementAt(i);							break;						case 2:							strOfficeTel3 = (String)objOfficeTel.elementAt(i);							break;					}				}				for(int i=0; i<objFaxNo.size(); i++){					switch (i){						case 0:							strFaxNo1 = (String)objFaxNo.elementAt(i);							break;						case 1:							strFaxNo2 = (String)objFaxNo.elementAt(i);							break;						case 2:							strFaxNo3 = (String)objFaxNo.elementAt(i);							break;					}				}				for(int i=0; i<objCphone.size(); i++){					switch (i){						case 0:							strCphone1 = (String)objCphone.elementAt(i);							break;						case 1:							strCphone2 = (String)objCphone.elementAt(i);							break;						case 2:							strCphone3 = (String)objCphone.elementAt(i);							break;					}				}					if(strCphone1.equals("010"))  strCphone1_010 = "selected";				if(strCphone1.equals("011"))  strCphone1_011 = "selected";				if(strCphone1.equals("016"))  strCphone1_016 = "selected";				if(strCphone1.equals("017"))  strCphone1_017 = "selected";						if(strCphone1.equals("018"))  strCphone1_018 = "selected";				if(strCphone1.equals("019"))  strCphone1_019 = "selected";					 				if(strRepFlag.equals("Y")){					strRepFlagY = "checked";				}else{					strRepFlagN = "checked";				}							if(strPostCd.length() >= 6){					strPostCd1 = strPostCd.substring(0, 3);					strPostCd2 = strPostCd.substring(3, 6);				}else if(strPostCd.length() >= 3){					strPostCd1 = strPostCd.substring(0, 3);				}else{					strPostCd1 = strPostCd;				}			        //개인식별정보로 변경됨 ksw				/*if(strJuminNo.length() >= 13){					strJuminNo1 = strJuminNo.substring(0,6);					strJuminNo2 = strJuminNo.substring(7,13);				}*/			}//if(strGubn.equals("3")){		}//if((objUserInfoHt != null) && (objUserInfoHt.size() > 0))				strSessInOutGbn = (String)session.getAttribute("INOUT_GBN");				if(strSessInOutGbn.equals("X")){  //외부사용자일 경우에는 담당업무를 선택할 수 있음.			objChargeInfoArry = objUserInfoDelegate.selectChargeCdInfo();			objUserChargeArry = objUserInfoDelegate.selectUserCharge(strUserId);						//외부사용자는 생년월일을 보여준다. 2015.05.07 ksw			strJuminNo = strJuminNo.substring(0,2) + "년" + strJuminNo.substring(2,4) + "월" + strJuminNo.substring(4,6) + "일";		}else{//내부사용자는 상급기관을 조회하여 기관명에 보여줌(국회 아래의 상급기관 조회)			Hashtable objHighOrgan = objUserInfoDelegate.selectHighOrganNm(strOrganId);			strHighOrganNm = (String)objHighOrgan.get("ORGAN_NM");						//내부사용자는 개인식별정보를 보여준다. 2015.05.07 ksw			strJuminNo = strJuminNo.substring(0,6);		}			}	catch(AppException objAppEx)	{			objMsgBean.setMsgType(MessageBean.TYPE_ERR);  		objMsgBean.setStrCode(objAppEx.getStrErrCode());  		objMsgBean.setStrMsg(objAppEx.getMessage());  		out.println("<br>Error!!!" + objAppEx.getMessage());		strError = "yes";%>  	<jsp:forward page="/common/message/ViewMsg.jsp"/><%  			return;	}	%>